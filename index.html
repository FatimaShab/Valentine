<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Valentine?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root{
      --bg:#ffd6e8;
      --card:#ffffff;
      --pink:#ff3b82;
      --shadow: 0 20px 50px rgba(0,0,0,.15);
      --text:#111827;
    }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(1200px 700px at 50% 10%, #fff0f6, var(--bg));
      color:var(--text);
      overflow:hidden;
    }

    .card{
      background:var(--card);
      padding:28px 24px;
      border-radius:20px;
      width:min(650px,92%);
      text-align:center;
      box-shadow:var(--shadow);
      position:relative;
    }

    /* ---------- ENVELOPE INTRO ---------- */
    .envelope-wrap{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:14px;
      min-height:320px;
    }

    .envelope{
      width:220px;
      height:150px;
      position:relative;
      cursor:pointer;
      transform: translateY(0);
      transition: transform .18s ease;
      user-select:none;
    }
    .envelope:hover{ transform: translateY(-3px); }

    /* Envelope body */
    .env-body{
      position:absolute;
      inset:0;
      background:#fff;
      border-radius:14px;
      box-shadow:0 20px 50px rgba(0,0,0,.14);
      overflow:hidden;
    }

    /* Bottom fold */
    .env-bottom{
      position:absolute;
      left:0; right:0; bottom:0;
      height:0;
      border-left:110px solid transparent;
      border-right:110px solid transparent;
      border-top:78px solid #ffe4ef;
      filter:saturate(1.05);
    }

    /* Left/right folds */
    .env-left{
      position:absolute;
      left:0; top:0; bottom:0;
      width:0; height:0;
      border-top:75px solid transparent;
      border-bottom:75px solid transparent;
      border-right:110px solid #ffd6e8;
      opacity:.95;
    }
    .env-right{
      position:absolute;
      right:0; top:0; bottom:0;
      width:0; height:0;
      border-top:75px solid transparent;
      border-bottom:75px solid transparent;
      border-left:110px solid #ffd6e8;
      opacity:.95;
    }

    /* Top flap */
    .env-flap{
      position:absolute;
      left:0; top:0;
      width:0; height:0;
      border-left:110px solid transparent;
      border-right:110px solid transparent;
      border-bottom:85px solid #ffb3cf;
      transform-origin: top center;
      transform: rotateX(0deg);
      transition: transform .45s ease;
      z-index:5;
    }

    /* Small heart on flap (like your drawing) */
    .env-heart{
      position:absolute;
      left:50%;
      top:18px;
      transform:translateX(-50%);
      width:16px;
      height:16px;
      z-index:6;
    }
    .env-heart:before,
    .env-heart:after{
      content:"";
      position:absolute;
      width:10px;
      height:16px;
      background: var(--pink);
      border-radius:10px 10px 0 0;
      top:0;
    }
    .env-heart:before{
      left:6px;
      transform: rotate(-45deg);
      transform-origin: 0 100%;
    }
    .env-heart:after{
      left:0px;
      transform: rotate(45deg);
      transform-origin: 100% 100%;
    }

    /* Letter that slides up */
    .letter{
      position:absolute;
      left:14px;
      right:14px;
      bottom:12px;
      height:92px;
      background:#ffffff;
      border-radius:12px;
      border:2px solid rgba(255,59,130,.14);
      box-shadow:0 12px 26px rgba(0,0,0,.10);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:34px;
      transform: translateY(0);
      transition: transform .55s ease;
      z-index:3;
    }

    .open-text{
      font-size:14px;
      opacity:.75;
    }

    .envelope.open .env-flap{
      transform: rotateX(180deg);
    }
    .envelope.open .letter{
      transform: translateY(-58px);
    }

    /* ---------- MAIN CONTENT ---------- */

    /* Corgi circle */
    .avatar{
      width:140px;
      height:140px;
      border-radius:50%;
      overflow:hidden;
      margin:0 auto 14px;
      border:6px solid rgba(255,59,130,.18);
      box-shadow:0 14px 40px rgba(0,0,0,.12);
      background:#fff;
    }
    .avatar img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    h1{
      font-size:32px;
      margin:6px 0 6px;
    }

    .sub{
      font-size:16px;
      opacity:.72;
      margin-bottom:18px;
    }

    /* Buttons area */
    .buttons{
      position:relative;
      height:120px; /* space for runaway */
      display:flex;
      justify-content:center;
      align-items:center;
    }

    .btn-row{
      display:flex;              /* horizontal */
      gap:14px;
      align-items:center;
      justify-content:center;
      position:relative;
      z-index:2;
    }

    button{
      border:none;
      padding:13px 24px;
      font-size:18px;
      border-radius:999px;
      cursor:pointer;
      user-select:none;
      transition: transform .1s ease, filter .12s ease;
    }
    button:active{ transform: scale(.98); }

    .yes{
      background:linear-gradient(135deg, var(--pink), #ff6aa2);
      color:white;
      box-shadow:0 10px 24px rgba(255,59,130,.25);
    }

    .no{
      background:#eee;
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      z-index:1;
    }

    .hint{
      font-size:14px;
      margin-top:10px;
      min-height:20px;
      opacity:.85;
    }

    .hidden{display:none}

    /* Views */
    .view{
      position:relative;
      min-height:320px;
    }

    .yay h1{
      margin-top:6px;
      margin-bottom:10px;
      font-size:36px;
    }

    .gif{
      width:100%;
      max-width:380px;
      border-radius:18px;
      box-shadow:0 14px 40px rgba(0,0,0,.12);
      display:block;
      margin:8px auto 0;
    }

    .love-notes{
      margin-top:14px;
      font-style:italic;
      font-size:18px;
      opacity:.9;
      line-height:1.4;
      font-family: Georgia, "Times New Roman", serif;
    }

    /* Floating "what if" button OUTSIDE card */
    .side-btn{
      position:fixed;
      right:22px;
      bottom:22px;
      padding:12px 18px;
      font-size:14px;
      border-radius:999px;
      background:linear-gradient(135deg, #ff3b82, #ff6aa2);
      color:white;
      border:none;
      cursor:pointer;
      box-shadow:0 14px 30px rgba(255,59,130,.35);
      z-index:2000;
      display:none; /* we show it ONLY on the yay page via JS */
    }
    .side-btn:hover{ filter:brightness(1.05); }

    /* Confetti (falling) */
    .confetti{
      position:fixed;
      top:-10px;
      width:10px;
      height:14px;
      opacity:.9;
      border-radius:2px;
      animation: fall linear forwards;
      pointer-events:none;
      z-index:999;
    }
    @keyframes fall{
      to { transform: translateY(110vh) rotate(720deg); opacity:1; }
    }

    /* Firework burst */
    .burst{
      position:fixed;
      left:0; top:0;
      width:8px; height:8px;
      border-radius:50%;
      pointer-events:none;
      z-index:1000;
    }
    .spark{
      position:absolute;
      left:50%; top:50%;
      width:6px; height:6px;
      border-radius:50%;
      transform: translate(-50%, -50%);
      animation: spark 900ms ease-out forwards;
    }
    @keyframes spark{
      0%   { transform: translate(-50%, -50%) scale(1); opacity:1; }
      100% { transform: translate(var(--dx), var(--dy)) scale(.6); opacity:0; }
    }
  </style>
</head>

<body>
  <div class="card">

    <!-- ENVELOPE SCREEN (FIRST) -->
    <div id="envelopeScreen" class="view">
      <div class="envelope-wrap">
        <div class="envelope" id="envelopeBtn" aria-label="Open envelope">
          <div class="env-body"></div>
          <div class="env-left"></div>
          <div class="env-right"></div>
          <div class="env-bottom"></div>

          <div class="env-flap"></div>
          <div class="env-heart" aria-hidden="true"></div>

          <div class="letter">üíå</div>
        </div>
        <div class="open-text">tap to open üíó</div>
      </div>
    </div>

    <!-- MAIN SCREEN -->
    <div id="main" class="hidden view">
      <div class="avatar">
        <img src="https://media.giphy.com/media/UMMXCX0X6eu6NMTKpJ/giphy.gif" alt="corgi">
      </div>

      <h1>Jamesy, will you be my Valentine?</h1>
      <div class="sub">(I have the biggest crush on you)</div>

      <div class="buttons" id="area">
        <div class="btn-row">
          <button class="yes" id="yes">Yes</button>
        </div>
        <button class="no" id="no">No</button>
      </div>

      <div class="hint" id="hint">choose wisely üòá</div>
    </div>

    <!-- YAY SCREEN -->
    <div id="yay" class="hidden yay view">
      <h1>wohoooo!! üéÜüéá</h1>

      <img class="gif" src="https://media.giphy.com/media/TnSWVzfO08oso/giphy.gif" alt="dancing">

      <div class="love-notes">
        ‚ÄúBhebak Jamesy, Always and Forever‚Äù<br>
        ‚ÄúTo whatever end‚Äù
      </div>
    </div>

    <!-- SERIOUSLY SCREEN -->
    <div id="seriously" class="hidden view">
      <h1>Seriously?</h1>
      <img class="gif" src="https://media.giphy.com/media/EhmTZVtUAiddGVhfTP/giphy.gif" alt="seriously dog">
    </div>

  </div>

  <!-- Floating button OUTSIDE the white card -->
  <button class="side-btn" id="whatIfBtn">what if you said no?</button>

  <script>
    const envelopeScreen = document.getElementById("envelopeScreen");
    const envelopeBtn = document.getElementById("envelopeBtn");

    const no = document.getElementById("no");
    const yes = document.getElementById("yes");
    const hint = document.getElementById("hint");
    const main = document.getElementById("main");
    const yay = document.getElementById("yay");
    const seriously = document.getElementById("seriously");
    const area = document.getElementById("area");
    const whatIfBtn = document.getElementById("whatIfBtn");

    // Party effects
    let partyInterval = null;
    function rand(min, max){ return Math.random() * (max - min) + min; }

    function spawnConfetti(){
      const c = document.createElement("div");
      c.className = "confetti";
      c.style.left = rand(0, 100) + "vw";
      c.style.animationDuration = rand(1.6, 3.2) + "s";
      const colors = ["#ff3b82","#ff6aa2","#ffd166","#06d6a0","#118ab2","#c77dff","#ff8fab"];
      c.style.background = colors[Math.floor(rand(0, colors.length))];
      document.body.appendChild(c);
      setTimeout(() => c.remove(), 3500);
    }

    function burstFirework(){
      const b = document.createElement("div");
      b.className = "burst";
      b.style.left = rand(10, 90) + "vw";
      b.style.top  = rand(10, 70) + "vh";

      const colors = ["#ff3b82","#ffd166","#06d6a0","#c77dff","#4cc9f0","#ff8fab"];
      const color = colors[Math.floor(rand(0, colors.length))];

      const sparks = 14;
      for(let i=0;i<sparks;i++){
        const s = document.createElement("div");
        s.className = "spark";
        s.style.background = color;
        const angle = (Math.PI * 2) * (i / sparks);
        const dist = rand(40, 120);
        s.style.setProperty("--dx", Math.cos(angle) * dist + "px");
        s.style.setProperty("--dy", Math.sin(angle) * dist + "px");
        b.appendChild(s);
      }

      document.body.appendChild(b);
      setTimeout(() => b.remove(), 1000);
    }

    function startParty(){
      if (partyInterval) return;
      partyInterval = setInterval(() => {
        for(let i=0;i<5;i++) spawnConfetti();
        if (Math.random() < 0.7) burstFirework();
      }, 350);
    }

    function stopParty(){
      if (!partyInterval) return;
      clearInterval(partyInterval);
      partyInterval = null;
    }

    // Show only one view + control floating button visibility
    function showOnly(view){
      [envelopeScreen, main, yay, seriously].forEach(v => v.classList.add("hidden"));
      view.classList.remove("hidden");

      // show floating button ONLY on yay page
      whatIfBtn.style.display = (view === yay) ? "block" : "none";

      // party only on yay
      if (view === yay) startParty();
      else stopParty();
    }

    function centerNo(){
      const startX = (area.clientWidth / 2) + 95;
      const startY = (area.clientHeight / 2);
      no.style.left = startX + "px";
      no.style.top  = startY + "px";
      no.style.transform = "translate(-50%, -50%)";
    }

    function moveNo(){
      const x = Math.random() * (area.clientWidth - no.offsetWidth);
      const y = Math.random() * (area.clientHeight - no.offsetHeight);
      no.style.left = x + "px";
      no.style.top = y + "px";
      no.style.transform = "translate(0,0)";
      hint.textContent = "if you choose No I‚Äôm coming for you üòà";
    }

    // Envelope open -> go to main
    envelopeBtn.addEventListener("click", () => {
      envelopeBtn.classList.add("open");
      setTimeout(() => {
        showOnly(main);
        // ensure NO button is placed nicely once main is visible
        setTimeout(centerNo, 0);
      }, 600);
    });

    // Events
    no.addEventListener("mouseenter", moveNo);
    no.addEventListener("click", e => { e.preventDefault(); moveNo(); });
    no.addEventListener("touchstart", e => { e.preventDefault(); moveNo(); }, {passive:false});

    yes.addEventListener("click", () => showOnly(yay));
    whatIfBtn.addEventListener("click", () => showOnly(seriously));

    // Initial
    window.addEventListener("load", () => {
      showOnly(envelopeScreen); // start on envelope
    });
    window.addEventListener("resize", () => {
      // only re-center when main is visible
      if (!main.classList.contains("hidden")) centerNo();
    });
  </script>
</body>
</html>
